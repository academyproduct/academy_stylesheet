@use '../00-tokens' as *;

/*
 * Migrated section block(s) from archive-academy_stylesheet_2024.css.
 * Source remains unchanged until parity verification is complete.
 */

/* || DIVERGING BAR CHART */

/* Screen-reader helper: visually hidden but accessible */
.divergingChart .sr-only {
	position: absolute !important;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/* Chart container */
.divergingChart .chart {
	max-width: 900px;
	margin: 1rem auto;
}

/* Center small section headings */
.divergingChart h5 {
	text-align: center;
	margin: 0.25rem 0;
}

/* One row = Left label | diverging bar track | Right label */
.divergingChart .row {
	display: grid;
	grid-template-columns: auto minmax(240px, 1fr) auto; /* left label | track | right label */
	align-items: center;
	gap: 0.75rem;
	margin: 0.9rem 0;

	/* Compute bar widths from minutes (set per row inline) */
	--left-pct: calc((var(--left) / var(--max-left)) * 50%); /* left side */
	--right-pct: calc((var(--right) / var(--max-right)) * 50%); /* right side */
}

.divergingChart .label-left,
.divergingChart .label-right {
	white-space: nowrap;
	font-variant-numeric: tabular-nums;
}

/* The bar track (center line divides the two sides) */
.divergingChart .track {
	position: relative;
	height: 2rem; /* EDIT to change bar thickness */
	background: transparent;
	overflow: hidden;
}

/* Center axis line */
.divergingChart .track::before {
	content: "";
	position: absolute;
	inset: 0 auto 0 50%;
	width: 1px;
	background: $acad-legacy-overlay-blue-163f6c33; /* faint dark blue line */
	pointer-events: none;
}

/* Keyboard focus ring */
.divergingChart .track:focus-visible {
	outline: 3px solid $acad-blue2;
	outline-offset: 2px;
}

/* The bars: start at width 0, grow out from the center */
.divergingChart .bar {
	position: absolute;
	top: 0;
	height: 100%;
	width: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	color: $acad-grayscale-0;
	font-weight: 600;
	white-space: nowrap;
	text-shadow: 0 1px 0 rgba($acad-primary-1000, 0.25); /* improve legibility */
	overflow: hidden;

	/* Optional: ensure tiny bars still show at least a few characters */

	/* min-width: 2.5ch; */
}

.divergingChart .bar.left {
	right: 50%;
	background: $acad-logo-academy-logo-02;
} /* left color */
.divergingChart .bar.right {
	left: 50%;
	background: $acad-orange1;
} /* right color */

/* Animate to the computed widths (speed = 1.1s; change as desired) */
.divergingChart .bar.left {
	animation: grow-left 1.1s ease-out forwards;
}

.divergingChart .bar.right {
	animation: grow-right 1.1s ease-out forwards;
}

@keyframes grow-left {
	to {
		width: var(--left-pct);
	}
}

@keyframes grow-right {
	to {
		width: var(--right-pct);
	}
}

/* Reduced motion: render bars at final widths immediately */
@media (prefers-reduced-motion: reduce) {
	.divergingChart .bar {
		animation: none;
	}

	.divergingChart .bar.left {
		width: var(--left-pct);
	}

	.divergingChart .bar.right {
		width: var(--right-pct);
	}
}

/* Mobile: stack left label, then track, then right label */
@media (width <= 560px) {
	.divergingChart .row {
		grid-template-columns: 1fr;
		grid-template-areas:
			"left"
			"track"
			"right";
		gap: 0.4rem;
	}

	.divergingChart .label-left {
		grid-area: left;
	}

	.divergingChart .track {
		grid-area: track;
	}

	.divergingChart .label-right {
		grid-area: right;
		justify-self: end;
	}

	.divergingChart .bar {
		font-size: 0.875rem;
	} /* slightly smaller text inside bars */
}

