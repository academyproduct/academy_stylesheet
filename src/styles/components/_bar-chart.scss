@use '../00-tokens' as *;

/*
 * Migrated section block(s) from archive-academy_stylesheet_2024.css.
 * Source remains unchanged until parity verification is complete.
 */

/* || BAR CHART */

/* Screen-reader helper: visually hide, keep readable by AT */
.barChart-academy .sr-only {
	position: absolute !important;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/* Chart container: set a max width and center it */
.barChart-academy .chart {
	max-width: 820px;
	margin: 1rem auto;
}

/* One “row” (label | track | percent) */
.barChart-academy .row {
	--val: 0; /* EDIT per row: numeric percent value (e.g., 43 for 43%) */
	--bar: #{$acad-legacy-blue-6695cb}; /* EDIT per row (optional): bar color */
	--delay: 0s; /* EDIT per row (optional): animation delay (e.g., .15s) */

	display: grid;
	grid-template-columns: auto 1fr auto; /* label | bar | % */
	grid-template-areas: "label track pct";
	align-items: center;
	gap: 0.75rem;
	margin: 0.6rem 0;
}

/* Place each cell into the grid areas */
.barChart-academy .label {
	grid-area: label;
	white-space: nowrap;
}

.barChart-academy .pct {
	grid-area: pct;
	font-variant-numeric: tabular-nums;
}

/* Track behind the animated bar */
.barChart-academy .track {
	grid-area: track;
	border: 1px solid $acad-legacy-blue-d2e4ee; /* Track stroke */
	height: 2rem; /* EDIT to change bar thickness */
	position: relative;
	overflow: hidden;
}

/* Keyboard focus ring on the track for accessibility */
.barChart-academy .track:focus-visible {
	outline: 3px solid $acad-blue2; /* Dark Blue */
	outline-offset: 2px;
}

/* The animated foreground bar */
.barChart-academy .bar {
	background: var(--bar); /* Color from row variable */
	width: 0%; /* Start collapsed */
	height: 100%;
	display: block;
	animation: bc-grow 1.2s ease-out forwards; /* EDIT 1.2s to change speed */
	animation-delay: var(--delay); /* Per-row delay */
}

/* Grow bar to the % width (val%) */
@keyframes bc-grow {
	to {
		width: calc(var(--val) * 1%);
	}
}

/* Respect users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
	.barChart-academy .bar {
		animation: none;
		width: calc(var(--val) * 1%);
	}
}

/* Mobile: stack label above the bar, keep % on the right */
@media (width <= 540px) {
	.barChart-academy .row {
		grid-template-columns: 1fr auto;
		grid-template-areas:
			"label label"
			"track pct";
		gap: 0.5rem 0.75rem;
	}

	.barChart-academy .label {
		white-space: normal;
	}
}
